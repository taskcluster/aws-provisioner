id:       http://schemas.taskcluster.net/aws-provisioner/v1/create-worker-type-request.json#
$schema:  http://json-schema.org/draft-04/schema#
title:                      "Create Worker Type Request"
description: |
  A worker launchSpecification and required metadata
type:                       object
properties:
  launchSpecification:
    type: object
    description: |
      AWS LaunchSpecification values shared by all regions and all instance-types.
      This launch spec should not contain either an InstanceType or ImageId.  The
      former should always be a key in the types object and the latter should be
      an overwrite in the regions object
  minCapacity:
    type: integer
    description: |
      Minimum number of capacity units to be provisioned.  A capacity unit
      is an abstract unit of capacity, where one capacity unit is roughly
      one task which should be taken off the queue
  maxCapacity:
    type: integer
    description: |
      Maximum number of capacity units to be provisioned.
  scalingRatio:
    type: number
    description: |
      A scaling ratio of 1.1 means that we don't start spawning new machines
      until 10% of our capacity is pending.  A scaling ratio of 0.9 means that
      we spawn enough machines that we always have 10% empty capacity.
  minPrice:
    type: number
    description: minimum 'price' that we'll pay for an instance
  maxPrice:
    type: number
    description: maximum 'price' that we'll pay for an instance
  canUseOndemand:
    type: boolean
    description: |
      True if this worker type is allowed on demand instances
  canUseSpot:
    type: boolean
    description: |
      True if this worker type is allowed spot instances
  instanceTypes:
    type: array
  regions:
    type: array
additionalProperties: false
required:
  - launchSpecification
  - maxCapacity
  - scalingRatio
  - minPrice
  - maxPrice
  - instanceTypes
  - regions
